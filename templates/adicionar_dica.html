{% extends "base.html" %}

{% block title %}Adicionar Nova Dica - CodeSphere{% endblock %}

{% block content %}
<header>
    <div class="container">
        <h1>Adicionar Nova Dica</h1>
    </div>
</header>

<main class="container">
    <form method="POST" class="add-form">
        <div class="form-group">
            <label for="titulo">Título:</label>
            <input type="text" id="titulo" name="titulo" required class="form-control">
        </div>
        <div class="form-group">
            <label for="autor">Autor:</label>
            <input type="text" id="autor" name="autor" required class="form-control">
        </div>
        <div class="form-group">
            <label for="texto">Conteúdo (Markdown):</label>
            <textarea id="texto" name="texto" rows="15" required class="form-control"></textarea>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-primary">Adicionar Dica</button>
            <a href="{{ url_for('dicas') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>

    <div class="markdown-preview">
        <h3>Prévia:</h3>
        <div id="preview-content"></div>
    </div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.0.3/marked.min.js"></script>
<script>
    const textArea = document.getElementById('texto');
    const preview = document.getElementById('preview-content');

    function updatePreview() {
        preview.innerHTML = marked(textArea.value);
    }

    textArea.addEventListener('input', updatePreview);
    updatePreview(); // Initial preview
</script>
{% endblock %}